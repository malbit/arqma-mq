
add_subdirectory(Catch2)

set(ARQMQ_TEST_SRC
    main.cpp
    test_batch.cpp
    test_connect.cpp
    test_commands.cpp
    test_requests.cpp
    test_string_view.cpp
    )

add_executable(tests ${ARQMQ_TEST_SRC})

find_package(Threads)
find_package(PkgConfig REQUIRED)
pkg_check_modules(SODIUM REQUIRED libsodium)

target_link_libraries(tests Catch2::Catch2 lokimq ${SODIUM_LIBRARIES} Threads::Threads)

set_property(TARGET tests PROPERTY CXX_STANDARD 14)
set_property(TARGET tests PROPERTY CXX_STANDARD_REQUIRED ON)

add_custom_target(check COMMAND tests)
